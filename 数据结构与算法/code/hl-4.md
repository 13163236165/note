### 题目

海量日志数据，提取出某日访问百度次数最多的那个IP，假设当前机器可用内存较小，无法一次性读入日志文件

### 解答

采用分治的思想

使用hash(value)%n将日志记录分到n个小文件中，在每个小文件中使用hash_map的方法统计每个value的频度，再利用堆排序对每个小块的频度进行排序：

1. IP地址最多有2^32=4GB种可能的取值，按照IP地址的hash(IP)%1024值，将海量日志存储到1024个小文件中。每个小文件最多包含4MB个IP地址
2. 对于每个小文件，可以构建一个IP作为key，出现次数作为value的hash_map，并记录当前出现次数最多的1个IP地址
3. 有了1024个小文件中的出现次数最多的IP，就可以得到总体上出现次数最多的IP